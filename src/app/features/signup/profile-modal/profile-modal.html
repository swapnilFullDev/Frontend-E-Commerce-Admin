<div class="p-4">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-semibold text-gray-800">{{ data.isEdit ? 'Edit Profile' : 'Profile' }}</h2>
        <button mat-icon-button (click)="close()" class="square-icon-btn">
          <mat-icon>close</mat-icon>
        </button>
      </div>

      <form [formGroup]="userForm" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <mat-form-field>
            <mat-label>Owner Name</mat-label>
            <input matInput formControlName="owner_name" [readonly]="!data.isEdit">
          </mat-form-field>

          <mat-form-field>
            <mat-label>Business Name</mat-label>
            <input matInput formControlName="businessName" [readonly]="!data.isEdit">
          </mat-form-field>

          <mat-form-field>
            <mat-label>Business Email</mat-label>
            <input matInput formControlName="business_email" [readonly]="!data.isEdit">
          </mat-form-field>

          <mat-form-field>
            <mat-label>Business Phone</mat-label>
            <input matInput formControlName="business_phone_no" [readonly]="!data.isEdit">
          </mat-form-field>

          <mat-form-field>
            <mat-label>Personal Phone</mat-label>
            <input matInput formControlName="personal_phone_no" [readonly]="!data.isEdit">
          </mat-form-field>

          <mat-form-field>
            <mat-label>GST Number</mat-label>
            <input matInput formControlName="gst_number" [readonly]="!data.isEdit">
          </mat-form-field>
        </div>

        <div formGroupName="business_address" class="space-y-4">
          <h3 class="text-lg font-medium text-gray-700">Business Address</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field>
              <mat-label>Street</mat-label>
              <input matInput formControlName="street" [readonly]="!data.isEdit">
            </mat-form-field>

            <mat-form-field>
              <mat-label>City</mat-label>
              <input matInput formControlName="city" [readonly]="!data.isEdit">
            </mat-form-field>

            <mat-form-field>
              <mat-label>State</mat-label>
              <input matInput formControlName="state" [readonly]="!data.isEdit">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Pincode</mat-label>
              <input matInput formControlName="pincode" [readonly]="!data.isEdit">
            </mat-form-field>
          </div>
        </div>

        @if(data.isEdit) {
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Business Documents</label>
            <input type="file" (change)="onFileSelected($event)" accept=".jpg,.jpeg,.pdf,.doc,.docx" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
            @if(filePreview) {
            <div class="mt-3 border rounded-lg p-2">
              @if(fileType === 'image') {
              <img [src]="filePreview" alt="Business Document" class="max-w-full h-32 object-contain">
              } @else if(fileType === 'pdf') {
              <iframe [src]="filePreview" class="w-full h-32" frameborder="0"></iframe>
              }
            </div>
            }
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Shop Front Image</label>
            <input type="file" (change)="onFileSelectedShop($event)" accept=".jpg,.jpeg,.png" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
            @if(filePreviewShop) {
            <div class="mt-3 border rounded-lg p-2">
              <img [src]="filePreviewShop" alt="Shop Front" class="max-w-full h-32 object-contain">
            </div>
            }
          </div>
        </div>
        } @else {
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Business Documents</label>
            @if(filePreview) {
            <div class="border rounded-lg p-2 bg-gray-50">
              @if(fileType === 'image') {
              <img [src]="filePreview" alt="Business Document" class="max-w-full h-32 object-contain">
              } @else if(fileType === 'pdf') {
              <iframe [src]="filePreview" class="w-full h-32" frameborder="0"></iframe>
              }
            </div>
            } @else {
            <p class="text-sm text-gray-400 bg-gray-50 p-3 rounded">No document uploaded</p>
            }
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Shop Front Image</label>
            @if(filePreviewShop) {
            <div class="border rounded-lg p-2 bg-gray-50">
              <img [src]="filePreviewShop" alt="Shop Front" class="max-w-full h-32 object-contain">
            </div>
            } @else {
            <p class="text-sm text-gray-400 bg-gray-50 p-3 rounded">No image uploaded</p>
            }
          </div>
        </div>
        }
      </form>

      <div class="flex justify-end gap-3 mt-6">
        <button mat-button (click)="close()" class="text-gray-600">Cancel</button>
        @if(data.isEdit) {
        <button mat-raised-button color="primary" (click)="onSave()" [disabled]="isLoading">
          {{ isLoading ? 'Saving...' : 'Save Changes' }}
        </button>
        }
      </div>
    </div>