<div class="p-6 bg-gray-50 min-h-screen">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h1 class="text-3xl font-bold text-gray-800 mb-2">
            Store Management
          </h1>
          <p class="text-gray-600">Manage store locations and information</p>
        </div>
        <button
          mat-raised-button
          color="primary"
          class="flex items-center gap-2"
          (click)="openStoreModal()"
        >
          <mat-icon>add</mat-icon>
          Add Store
        </button>
      </div>

      <mat-card>
        <mat-card-content class="p-6">
          <!-- Search -->
          <div class="mb-4">
            <mat-form-field class="w-full max-w-md">
              <mat-label>Search stores</mat-label>
              <input
                matInput
                (keyup)="applyFilter($event)"
                placeholder="Search by name or location"
              />
              <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>
          </div>

          <!-- Loading -->
           @if(isLoading){
             <app-loading></app-loading>
           }@else {
             <!-- Table -->
             <div class="hidden md:block overflow-x-auto">
               <table mat-table [dataSource]="dataSource" matSort class="w-full">
                 <!-- <ng-container matColumnDef="id">
                   <th
                     mat-header-cell
                     *matHeaderCellDef
                     mat-sort-header
                     class="font-semibold"
                   >
                     ID
                   </th>
                   <td mat-cell *matCellDef="let store">{{ store.id }}</td>
                 </ng-container> -->
   
                 <ng-container matColumnDef="name">
                   <th
                     mat-header-cell
                     *matHeaderCellDef
                     mat-sort-header
                     class="font-semibold"
                   >
                     Store Name
                   </th>
                   <td mat-cell *matCellDef="let store">
                     {{ store.businessName }}
                   </td>
                 </ng-container>
   
                 <ng-container matColumnDef="location">
                   <th
                     mat-header-cell
                     *matHeaderCellDef
                     mat-sort-header
                     class="font-semibold"
                   >
                     Location
                   </th>
                   <td mat-cell *matCellDef="let store">{{ store.businessAddress.city }}</td>
                 </ng-container>
   
                 <ng-container matColumnDef="owner">
                   <th
                     mat-header-cell
                     *matHeaderCellDef
                     mat-sort-header
                     class="font-semibold"
                   >
                     Owner
                   </th>
                   <td mat-cell *matCellDef="let store">{{ store.ownerName }}</td>
                 </ng-container>
   
                 <ng-container matColumnDef="contact">
                   <th mat-header-cell *matHeaderCellDef class="font-semibold">
                     Contact
                   </th>
                   <td mat-cell *matCellDef="let store">
                     <div class="text-sm">
                       <div>{{ store.contactPhone }}</div>
                       <div class="text-gray-500">{{ store.businessPhoneNo }}</div>
                     </div>
                   </td>
                 </ng-container>
   
                 <ng-container matColumnDef="address">
                   <th mat-header-cell *matHeaderCellDef class="font-semibold">
                     Address
                   </th>
                   <td mat-cell *matCellDef="let store">
                     <div class="text-sm">
                       <div>{{ store.businessAddress.full_address }}</div>
                       <div class="text-gray-500">
                         {{ store.businessAddress.state }} {{ store.businessAddress.zipCode }}
                       </div>
                     </div>
                   </td>
                 </ng-container>
   
                 <ng-container matColumnDef="status">
                   <th mat-header-cell *matHeaderCellDef class="font-semibold">
                     Status
                   </th>
                   <td mat-cell *matCellDef="let store">
                     <mat-slide-toggle
                       [checked]="store.isVerified"
                       color="primary"
                       (change)="onStatusChange(store.id)"
                     >
                       {{ store.isVerified ? "Active" : "Inactive" }}
                     </mat-slide-toggle>
                   </td>
                 </ng-container>
   
                 <ng-container matColumnDef="actions">
                   <th mat-header-cell *matHeaderCellDef class="font-semibold">
                     Actions
                   </th>
                   <td mat-cell *matCellDef="let store">
                     <button
                       mat-icon-button
                       color="primary"
                       (click)="openStoreModal(store)"
                       matTooltip="Edit store"
                     >
                       <mat-icon>edit</mat-icon>
                     </button>
                     <button
                       mat-icon-button
                       color="warn"
                       (click)="deleteStore(store)"
                       matTooltip="Delete store"
                     >
                       <mat-icon>delete</mat-icon>
                     </button>
                   </td>
                 </ng-container>
   
                 <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                 <tr
                   mat-row
                   *matRowDef="let row; columns: displayedColumns"
                   class="hover:bg-gray-50"
                 ></tr>
               </table>
   
              </div>

              <!-- Mobile and Tablet -->
               
              <!-- Mobile/Tablet Card View -->
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 md:hidden mt-4">
                <mat-card *ngFor="let store of dataSource.filteredData" class="p-4 shadow-md border border-gray-100 rounded-xl">
                  <div class="flex flex-col gap-3">

                    <!-- Header -->
                    <div class="flex items-center justify-between">
                      <div>
                        <h3 class="text-lg font-semibold text-gray-800">{{ store.businessName }}</h3>
                        <p class="text-sm text-gray-500">{{ store.businessAddress.city }}</p>
                      </div>

                      <mat-slide-toggle [checked]="store.isVerified" color="primary" (change)="onStatusChange(store.id)"
                        class="!text-xs">
                        {{ store.isVerified ? 'Active' : 'Inactive' }}
                      </mat-slide-toggle>
                    </div>

                    <!-- Owner -->
                    <div class="text-sm">
                      <span class="font-semibold text-gray-700">Owner:</span>
                      <span class="text-gray-600">{{ store.ownerName }}</span>
                    </div>

                    <!-- Contact -->
                    <div class="text-sm">
                      <span class="font-semibold text-gray-700">Contact:</span>
                      <div class="text-gray-600">
                        <div>{{ store.personalPhoneNo }}</div>
                        <div class="text-gray-500">{{ store.businessPhoneNo }}</div>
                      </div>
                    </div>

                    <!-- Address -->
                    <div class="text-sm">
                      <span class="font-semibold text-gray-700">Address:</span>
                      <p class="text-gray-600 leading-snug">
                        {{ store.businessAddress.full_address }} <br>
                        {{ store.businessAddress.state }} - {{ store.businessAddress.zipCode }}
                      </p>
                    </div>

                    <!-- Actions -->
                    <div class="flex justify-end gap-2 pt-2 border-t border-gray-100 mt-2">
                      <button mat-icon-button color="primary" (click)="openStoreModal(store)" matTooltip="Edit store">
                        <mat-icon>edit</mat-icon>
                      </button>
                      <button mat-icon-button color="warn" (click)="deleteStore(store)" matTooltip="Delete store">
                        <mat-icon>delete</mat-icon>
                      </button>
                    </div>
                  </div>
                </mat-card>
              </div>

              <mat-paginator
                [pageSizeOptions]="[5, 10, 20]"
                showFirstLastButtons
                class="mt-4"
              >
              </mat-paginator>
           }

        </mat-card-content>
      </mat-card>
    </div>